!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VanillaSlider=e():t.VanillaSlider=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t.single="single",t["from-start"]="from-start",t["from-end"]="from-end",t.double="double"}(e.TSliderType||(e.TSliderType={}));!function(t){t.vertical="vertical",t.horizontal="horizontal"}(e.TOrientation||(e.TOrientation={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners=new Set}return t.prototype.attach=function(t){this.listeners.add(t)},t.prototype.remove=function(t){this.listeners.delete(t)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listeners.forEach(function(e){e.apply(void 0,t)})},t}();e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialOptions={type:!1,min:0,max:100,from:0,fromFixed:!1,to:0,toFixed:!1,step:1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0);e.initialOptions={type:n.TSliderType.single,orientation:n.TOrientation.horizontal,fromFixed:!1,toFixed:!1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialOptions={onCreate:null,onSlideStart:null,onSlide:null,onSlideFinish:null,onUpdate:null}},function(t,e,i){"use strict";var n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(6),r=i(7),s=i(11),a=i(2),l=i(0),d=i(3),p=i(4),c=function(){function t(t,e){void 0===e&&(e={}),this.root=t,this.modelOptions=n({},a.initialOptions),this.viewOptions=n({},d.initialOptions),this.controllerCallbacks=n({},p.initialOptions),this.init(e)}return Object.defineProperty(t.prototype,"data",{get:function(){return n({},this.model.data,this.view.data)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.setOptions(t),this.model.updateState(this.modelOptions),this.view.updateState(this.viewOptions),this.controller.updateClientsCallbacks(this.controllerCallbacks)},t.prototype.init=function(t){this.model=new o.default,this.view=new r.default(this.root),this.setOptions(t),this.model.updateState(this.modelOptions),this.view.updateState(this.viewOptions),this.controller=new s.default(this.model,this.view,this.controllerCallbacks)},t.prototype.setOptions=function(t){this.modelOptions=n({},this.model.data),this.viewOptions=n({},this.view.data),t.type&&t.type in l.TSliderType&&(this.viewOptions.type=t.type,this.modelOptions.type=t.type===l.TSliderType.double),t.orientation&&t.orientation in l.TOrientation&&(this.viewOptions.orientation=t.orientation),this.setNumberOption("min",t.min),this.setNumberOption("max",t.max),this.setNumberOption("from",t.from),this.setNumberOption("to",t.to),this.setNumberOption("step",t.step),this.setFixedOption("fromFixed",t.fromFixed),this.setFixedOption("toFixed",t.toFixed),this.setCallback("onCreate",t.onCreate),this.setCallback("onSlideStart",t.onSlideStart),this.setCallback("onSlide",t.onSlide),this.setCallback("onSlideFinish",t.onSlideFinish),this.setCallback("onUpdate",t.onUpdate)},t.prototype.setNumberOption=function(t,e){void 0===e||Number.isNaN(Number(e))||(this.modelOptions[t]=Number(e))},t.prototype.setFixedOption=function(t,e){void 0!==e&&(this.modelOptions[t]=JSON.parse(e.toString()),this.viewOptions[t]=JSON.parse(e.toString()))},t.prototype.setCallback=function(t,e){void 0!==e&&"function"==typeof e&&(this.controllerCallbacks[t]=e)},t}(),u=function(){function t(e,i){void 0===i&&(i={});var n=t.getValidateNode(e);if(t.instances.has(n))return t.instances.get(n);var o=new c(n,i);this.setOptions=o.update.bind(o),this.data=o.data,t.instances.set(n,this)}return t.getInstance=function(e){if(this.isDivOrSpan(e))return t.instances.get(e)},t.getValidateNode=function(t){var e="string"==typeof t?document.querySelector(t):t;if(this.isDivOrSpan(e))return e;if(e instanceof HTMLCollection&&this.isDivOrSpan(e[0]))return e[0];throw"Invalid node type, expected 'div' or 'span'"},t.isDivOrSpan=function(t){return t instanceof HTMLDivElement||t instanceof HTMLSpanElement},t.instances=new Map,t}();e.default=u},function(t,e,i){"use strict";var n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=i(2),s=function(){function t(){this.modelEvents={stateChanged:new o.default},this.options=n({},r.initialOptions)}return Object.defineProperty(t.prototype,"data",{get:function(){return n({},this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return n({},this.modelEvents)},enumerable:!0,configurable:!0}),t.prototype.updateState=function(t){this.setType(t.type),this.setStep(t.step),this.setRange(t.min,t.max),this.setFixed(t.fromFixed,t.toFixed),this.setValues(t.from,t.to)},t.prototype.updateHandleValue=function(t,e){var i=this.options;if(!("from"===t?i.fromFixed:i.toFixed)){var n="from"===t?i.min:i.from,o="from"===t?i.to:i.max,r=Math.round((e-i.min)/i.step),s=r*i.step+i.min,a=i.type?this.correctDiapason(s,n,o):this.correctDiapason(s,n,i.max);a!==i[t]&&(i[t]=a,this.modelEvents.stateChanged.notify(t,i[t]))}},t.prototype.setRange=function(t,e){void 0===t&&(t=this.options.min),void 0===e&&(e=this.options.max),this.options.min=t>e?e:t,this.options.max=e,this.updateFromTo()},t.prototype.setValues=function(t,e){void 0===t&&(t=this.options.from),void 0===e&&(e=this.options.to),this.options.from=t,this.options.to=e,this.updateFromTo()},t.prototype.setStep=function(t){var e=this.options,i=e.max-e.min;return t<=0?void(e.step=1):t>i?void(e.step=i):void(e.step=t)},t.prototype.setType=function(t){this.options.type=t,this.updateFromTo()},t.prototype.setFixed=function(t,e){void 0===t&&(t=this.options.fromFixed),void 0===e&&(e=this.options.toFixed),this.options.fromFixed=t,this.options.toFixed=e},t.prototype.updateFromTo=function(){var t=this.options;t.from=this.correctDiapason(t.from,t.min,t.max),t.to=t.type?this.correctDiapason(t.to,t.from,t.max):t.to},t.prototype.correctDiapason=function(t,e,i){return t<=e?e:t>=i?i:t},t}();e.default=s},function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r=function(t,e,i,o){var r,s=arguments.length,a=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;l>=0;l--)(r=t[l])&&(a=(s<3?r(a):s>3?r(e,i,a):r(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(e,"__esModule",{value:!0}),i(8),i(9);var s=i(10),a=i(1),l=i(0),d=i(3),p=function(){function t(t){this.handle=null,this.viewEvents={slideStart:new a.default,slideFinish:new a.default,slide:new a.default},this.options=o({},d.initialOptions),this.init(t)}return Object.defineProperty(t.prototype,"data",{get:function(){return o({},this.options)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sliderSize",{get:function(){return this.getSliderSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return o({},this.viewEvents)},enumerable:!0,configurable:!0}),t.prototype.updateState=function(t){this.setOptions(t),this.nodes.track.innerHTML="",this.setNodes(),this.render()},t.prototype.emitCustomEvent=function(t,e){this.nodes[e].dispatchEvent(t)},t.prototype.changeHandlePosition=function(t,e){var i=this.options.orientation,n=this.nodes[t],o=i===l.TOrientation.vertical?"bottom":"left";n.style[o]=e+"%",this.calcRange()},t.prototype.init=function(t){this.nodes={root:t,track:document.createElement("div"),from:document.createElement("span"),to:document.createElement("span"),range:document.createElement("div")},this.nodes.root.innerHTML="",this.nodes.root.appendChild(this.nodes.track),this.setNodes(),this.render(),this.setHandlers()},t.prototype.setOptions=function(t){this.options=o({},t)},t.prototype.render=function(){var t=this.options.type,e=this.nodes;e.track.appendChild(e.from),t!==l.TSliderType.single&&e.track.appendChild(e.range),t===l.TSliderType.double&&e.track.appendChild(e.to)},t.prototype.setHandlers=function(){window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.finishDragging),this.nodes.track.addEventListener("mousedown",this.startDragging)},t.prototype.calcRange=function(){if(this.options.type!==l.TSliderType.single){var t=this.options,e=this.nodes,i=t.orientation===l.TOrientation.vertical?"bottom":"left",n=t.orientation===l.TOrientation.vertical?"top":"right",o=t.type===l.TSliderType.double?"to":"from";e.range.style[i]=t.type===l.TSliderType["from-start"]?"0":e.from.style[i],e.range.style[n]=t.type===l.TSliderType["from-end"]?"0":100-parseFloat(e[o].style[i])+"%"}},t.prototype.setNodes=function(){var t=this.options,e=this.nodes;e.track.setAttribute("class","vanilla-slider vanilla-slider_"+t.type+" vanilla-slider_"+t.orientation),e.range.setAttribute("class","vanilla-slider__range vanilla-slider__range_"+t.type),e.range.removeAttribute("style"),e.from.setAttribute("tabindex","0"),e.from.setAttribute("class","vanilla-slider__handle vanilla-slider__handle_from"+(t.fromFixed?" vanilla-slider__handle_fixed":"")),e.from.removeAttribute("style"),e.to.setAttribute("tabindex","1"),e.to.setAttribute("class","vanilla-slider__handle vanilla-slider__handle_to"+(t.toFixed?" vanilla-slider__handle_fixed":"")),e.to.removeAttribute("style")},t.prototype.startDragging=function(t){var e=this.nodes,i=this.getRelativeCoord(t);e.from.classList.remove("vanilla-slider__handle_last-type"),e.to.classList.remove("vanilla-slider__handle_last-type"),t.target===e.from&&(this.handle="from"),t.target===e.to&&(this.handle="to"),t.target!==e.range&&t.target!==e.track||(this.handle=this.chooseHandle(i)),this.handle&&(e[this.handle].classList.add("active"),e[this.handle].classList.add("vanilla-slider__handle_last-type"),this.viewEvents.slideStart.notify(this.handle),this.drag(t),window.addEventListener("mousemove",this.drag),window.addEventListener("mouseup",this.finishDragging))},t.prototype.drag=function(t){var e=this.getRelativeCoord(t);this.handle&&this.viewEvents.slide.notify(this.handle,e)},t.prototype.finishDragging=function(){this.handle&&(window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.finishDragging),this.nodes[this.handle].classList.remove("active"),this.viewEvents.slideFinish.notify(this.handle),this.handle=null)},t.prototype.chooseHandle=function(t){var e=this.options,i=this.nodes;if(this.handle)return this.handle;if(e.type!==l.TSliderType.double)return"from";if(e.fromFixed&&e.toFixed)return null;if(e.fromFixed)return"to";if(e.toFixed)return"from";var n=this.getHandleCoord(i.from),o=this.getHandleCoord(i.to);return e.orientation===l.TOrientation.horizontal&&t<n?"from":e.orientation===l.TOrientation.horizontal&&t>o?"to":e.orientation===l.TOrientation.vertical&&t>n?"from":e.orientation===l.TOrientation.vertical&&t<o?"to":Math.abs(n-t)<Math.abs(o-t)?"from":"to"},t.prototype.getRelativeCoord=function(t){var e=this.nodes,i=this.options.orientation===l.TOrientation.horizontal?"pageX":"pageY",n=this.options.orientation===l.TOrientation.horizontal?"offsetLeft":"offsetTop";return t[i]-e.track[n]},t.prototype.getHandleCoord=function(t){var e=this.options.orientation===l.TOrientation.horizontal?"offsetLeft":"offsetTop",i=this.options.orientation===l.TOrientation.horizontal?"offsetWidth":"offsetHeight";return t[e]+t[i]/2},t.prototype.getSliderSize=function(){return{width:this.nodes.track.clientWidth,height:this.nodes.track.clientHeight}},r([s.bind],t.prototype,"startDragging",null),r([s.bind],t.prototype,"drag",null),r([s.bind],t.prototype,"finishDragging",null),t}();e.default=p},function(t,e){},function(t,e){},function(t,e,i){var n,o,r;!function(i,s){o=[e],n=s,void 0!==(r="function"==typeof n?n.apply(e,o):n)&&(t.exports=r)}(0,function(t){"use strict";function e(t,e){e=e||t.decorate||i(t);var n=e();return function(){for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];var s=o.length;return(s<2?e:s>2?n:t).apply(void 0,o)}}function i(t){return function(e){return"function"==typeof e?t(e):function(i,n,o){o.value=t(o.value,e,i,n,o)}}}t.__esModule=!0;var n={},o=Object.prototype.hasOwnProperty,r={memoize:function(t){var e=arguments.length<=1||void 0===arguments[1]?n:arguments[1],i=e.cache||{};return function(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=String(r[0]);return!1===e.caseSensitive&&(a=a.toLowerCase()),o.call(i,a)?i[a]:i[a]=t.apply(this,r)}},debounce:function(t,e){if("function"==typeof e){var i=t;t=e,e=i}var n=e&&e.delay||e||0,o=void 0,r=void 0,s=void 0;return function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];o=i,r=this,s||(s=setTimeout(function(){t.apply(r,o),o=r=s=null},n))}},bind:function(t,e,i){var n=i.value;return{configurable:!0,get:function(){var t=n.bind(this);return Object.defineProperty(this,e,{value:t,configurable:!0,writable:!0}),t}}}},s=e(r.memoize),a=e(r.debounce),l=e(function(t,e){return t.bind(e)},function(){return r.bind});t.memoize=s,t.debounce=a,t.bind=l,t.default={memoize:s,debounce:a,bind:l}})},function(t,e,i){"use strict";var n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(e,"__esModule",{value:!0});var o=i(0),r=i(4),s=function(){function t(t,e,i){this.model=t,this.view=e,this.callbacks=n({},r.initialOptions),this.init(i)}return t.prototype.updateClientsCallbacks=function(t){this.setCallbacks(t),this.emitEvent("vanillaupdate","root",this.callbacks.onUpdate,this.getModelViewData()),this.view.changeHandlePosition("from",this.convertToPercent(this.model.data.from)),this.view.changeHandlePosition("to",this.convertToPercent(this.model.data.to))},t.prototype.init=function(t){this.setCallbacks(t),this.emitEvent("vanillacreate","root",this.callbacks.onCreate,this.getModelViewData()),this.attachModelEvents(),this.attachViewEvents(),this.view.changeHandlePosition("from",this.convertToPercent(this.model.data.from)),this.view.changeHandlePosition("to",this.convertToPercent(this.model.data.to))},t.prototype.setCallbacks=function(t){this.callbacks.onCreate=t.onCreate,this.callbacks.onSlideStart=t.onSlideStart,this.callbacks.onSlide=t.onSlide,this.callbacks.onSlideFinish=t.onSlideFinish,this.callbacks.onUpdate=t.onUpdate},t.prototype.attachViewEvents=function(){var t=this,e=this.model,i=this.view;i.events.slide.attach(function(i,n){e.updateHandleValue(i,t.convertToReal(n))}),i.events.slideStart.attach(function(e){t.emitEvent("vanillastart",e,t.callbacks.onSlideStart,t.getModelViewData())}),i.events.slideFinish.attach(function(e){t.emitEvent("vanillafinish",e,t.callbacks.onSlideFinish,t.getModelViewData())})},t.prototype.attachModelEvents=function(){var t=this,e=this.model,i=this.view;e.events.stateChanged.attach(function(e,n){i.changeHandlePosition(e,t.convertToPercent(n)),t.emitEvent("vanillaslide",e,t.callbacks.onSlide,t.getModelViewData())})},t.prototype.convertToPercent=function(t){var e=this.model.data,i=e.max-e.min;return Number((100*(t-e.min)/i).toFixed(10))},t.prototype.convertToReal=function(t){var e=this.model.data,i=this.view.sliderSize,n=e.max-e.min;return this.view.data.orientation===o.TOrientation.horizontal?Number((t*n/i.width+e.min).toFixed(10)):Number(((i.height-t)*n/i.height+e.min).toFixed(10))},t.prototype.emitEvent=function(t,e,i,n){var o=this.createSliderEvent(t,n);this.view.emitCustomEvent(o,e),this.callClientCallback(o,n,i)},t.prototype.callClientCallback=function(t,e,i){i&&i(t,e)},t.prototype.createSliderEvent=function(t,e){return new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0})},t.prototype.getModelViewData=function(){return n({},this.model.data,this.view.data)},t}();e.default=s}]).default});