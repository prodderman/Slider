!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VanillaSlider=e():t.VanillaSlider=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.listeners=new Set}return t.prototype.attach=function(t){this.listeners.add(t)},t.prototype.remove=function(t){this.listeners.delete(t)},t.prototype.notify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.listeners.forEach(function(e){e.apply(void 0,t)})},t}();e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialOptions={type:!1,min:0,max:100,from:0,fromFixed:!1,to:0,toFixed:!1,step:1}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialOptions={type:"single",orientation:"horizontal",fromFixed:!1,toFixed:!1}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initialOptions={onCreate:null,onStart:null,onSlide:null,onEnd:null,onUpdate:null}},function(t,e,o){"use strict";var n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(5),s=o(6),r=o(10),a=o(1),l=o(2),c=o(3),d=function(){function t(t,e){void 0===e&&(e={}),this.root=t,this.modelOptions=n({},a.initialOptions),this.viewOptions=n({},l.initialOptions),this.controllerCallbacks=n({},c.initialOptions),this.init(e)}return Object.defineProperty(t.prototype,"data",{get:function(){return n({},this.model.data,this.view.data)},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.setOptions(t),this.model.update(this.modelOptions),this.view.update(this.viewOptions),this.controller.update(this.controllerCallbacks)},t.prototype.init=function(t){this.model=new i.default,this.view=new s.default(this.root),this.setOptions(t),this.model.update(this.modelOptions),this.view.update(this.viewOptions),this.controller=new r.default(this.model,this.view,this.controllerCallbacks)},t.prototype.setOptions=function(t){this.modelOptions=n({},this.model.data),this.viewOptions=n({},this.view.data),t.type&&["single","from-start","from-end","double"].includes(t.type)&&(this.viewOptions.type=t.type,this.modelOptions.type="double"===t.type),t.orientation&&["vertical","horizontal"].includes(t.orientation)&&(this.viewOptions.orientation=t.orientation),this.setNumberOption("min",t.min),this.setNumberOption("max",t.max),this.setNumberOption("from",t.from),this.setNumberOption("to",t.to),this.setNumberOption("step",t.step),this.setBooleanOption("fromFixed",t.fromFixed),this.setBooleanOption("toFixed",t.toFixed),this.setCallback("onCreate",t.onCreate),this.setCallback("onStart",t.onStart),this.setCallback("onSlide",t.onSlide),this.setCallback("onEnd",t.onEnd),this.setCallback("onUpdate",t.onUpdate)},t.prototype.setNumberOption=function(t,e){void 0===e||Number.isNaN(Number(e))||(this.modelOptions[t]=Number(e))},t.prototype.setBooleanOption=function(t,e){void 0!==e&&(this.modelOptions[t]=JSON.parse(e.toString()),this.viewOptions[t]=JSON.parse(e.toString()))},t.prototype.setCallback=function(t,e){this.controllerCallbacks[t]=e&&"function"==typeof e?e:null},t}(),p=function(){function t(e,o){void 0===o&&(o={});var n=t.getValidateNode(e),i=new d(n,o);this.setOptions=i.update.bind(i),this.data=i.data,t.instances.set(n,this)}return t.getInstance=function(e){var o=t.getValidateNode(e);return t.instances.has(o)?t.instances.get(o):void 0},t.getValidateNode=function(t){var e="string"==typeof t?document.querySelector(t):t;if(this.isDivOrSpan(e))return e;if(e instanceof HTMLCollection&&this.isDivOrSpan(e[0]))return e[0];throw"Invalid node type, expected 'div' or 'span'"},t.isDivOrSpan=function(t){return t instanceof HTMLDivElement||t instanceof HTMLSpanElement},t.instances=new Map,t}();e.default=p},function(t,e,o){"use strict";var n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),s=o(1),r=function(){function t(){this.modelEvents={fromChanged:new i.default,toChanged:new i.default},this.options=n({},s.initialOptions)}return Object.defineProperty(t.prototype,"data",{get:function(){return this.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this.modelEvents},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.setType(t.type),this.setStep(t.step),this.setRange(t.min,t.max),this.setFixed(t.fromFixed,t.toFixed),this.setValues(t.from,t.to)},t.prototype.calcFromWithStep=function(t){var e=this.options;if(!e.fromFixed){var o=Math.round((t-e.min)/e.step),n=o*e.step+e.min,i=e.type?this.correctDiapason(n,e.min,e.to):this.correctDiapason(n,e.min,e.max);i!==e.from&&(e.from=i,this.modelEvents.fromChanged.notify(e.from))}},t.prototype.calcToWithStep=function(t){var e=this.options;if(e.type&&!e.toFixed){var o=Math.round((t-e.min)/e.step),n=o*e.step+e.min,i=this.correctDiapason(n,e.from,e.max);i!==e.to&&(e.to=i,this.modelEvents.toChanged.notify(e.to))}},t.prototype.setRange=function(t,e){void 0===t&&(t=this.options.min),void 0===e&&(e=this.options.max),this.options.min=t>e?e:t,this.options.max=e,this.updateFromTo()},t.prototype.setValues=function(t,e){void 0===t&&(t=this.options.from),void 0===e&&(e=this.options.to),this.options.from=t,this.options.to=e,this.updateFromTo()},t.prototype.setStep=function(t){var e=this.options,o=e.max-e.min;return t<=0?void(e.step=1):t>o?void(e.step=o):void(e.step=t)},t.prototype.setType=function(t){this.options.type=t,this.updateFromTo()},t.prototype.setFixed=function(t,e){void 0===t&&(t=this.options.fromFixed),void 0===e&&(e=this.options.toFixed),this.options.fromFixed=t,this.options.toFixed=e},t.prototype.updateFromTo=function(){var t=this.options;t.from=this.correctDiapason(t.from,t.min,t.max),t.to=t.type?this.correctDiapason(t.to,t.from,t.max):t.to},t.prototype.correctDiapason=function(t,e,o){return void 0===e&&(e=this.options.min),void 0===o&&(o=this.options.min),t<e?e:t>o?o:t},t}();e.default=r},function(t,e,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=function(t,e,o,i){var s,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(a=(r<3?s(a):r>3?s(e,o,a):s(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(e,"__esModule",{value:!0}),o(7),o(8);var r=o(9),a=o(0),l=o(2),c=function(){function t(t){this.root=t,this.handle=null,this.viewEvents={slideStart:new a.default,slideEnd:new a.default,fromChanged:new a.default,toChanged:new a.default},this.options=i({},l.initialOptions),this.init()}return Object.defineProperty(t.prototype,"data",{get:function(){return this.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this.viewEvents},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodesData",{get:function(){return this.nodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootObject",{get:function(){return this.root},enumerable:!0,configurable:!0}),t.prototype.update=function(t){this.setOptions(t),this.nodes.track.innerHTML="",this.setNodes(),this.render()},t.prototype.calcFrom=function(t){var e=this.options,o=this.nodes,n="vertical"===e.orientation?"bottom":"left";o.from.style[n]=t+"%",this.calcRange()},t.prototype.calcTo=function(t){if("double"===this.options.type){var e=this.options,o=this.nodes,n="vertical"===e.orientation?"bottom":"left";o.to.style[n]=t+"%",this.calcRange()}},t.prototype.init=function(){this.nodes={track:document.createElement("div"),from:document.createElement("span"),to:document.createElement("span"),range:document.createElement("div")},this.root.innerHTML="",this.root.appendChild(this.nodes.track),this.setNodes(),this.render(),this.setHandlers()},t.prototype.setOptions=function(t){this.options=i({},t)},t.prototype.render=function(){var t=this.options,e=this.nodes;e.track.appendChild(e.from),"single"!==t.type&&e.track.appendChild(e.range),"double"===t.type&&e.track.appendChild(e.to)},t.prototype.setHandlers=function(){window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.nodes.track.addEventListener("mousedown",this.mouseDown)},t.prototype.calcRange=function(){if("single"!==this.options.type){var t=this.options,e=this.nodes,o="vertical"===t.orientation?"bottom":"left",n="vertical"===t.orientation?"top":"right",i="double"===t.type?"to":"from";e.range.style[o]="from-start"===t.type?"0":e.from.style[o],e.range.style[n]="from-end"===t.type?"0":100-parseFloat(e[i].style[o])+"%"}},t.prototype.setNodes=function(){var t=this.options,e=this.nodes;e.track.setAttribute("class","vanilla-slider vanilla-slider_"+t.type+" vanilla-slider_"+t.orientation),e.range.setAttribute("class","vanilla-slider__range vanilla-slider__range_"+t.type),e.range.removeAttribute("style"),e.from.setAttribute("tabindex","0"),e.from.setAttribute("class","vanilla-slider__handle vanilla-slider__handle_from"+(t.fromFixed?" vanilla-slider__handle_fixed":"")),e.from.removeAttribute("style"),e.to.setAttribute("tabindex","1"),e.to.setAttribute("class","vanilla-slider__handle vanilla-slider__handle_to"+(t.toFixed?" vanilla-slider__handle_fixed":"")),e.to.removeAttribute("style")},t.prototype.mouseDown=function(t){var e=this.nodes,o=this.getRelativeCoord(t);t.target===e.from&&(this.handle=e.from),t.target===e.to&&(this.handle=e.to),t.target!==e.range&&t.target!==e.track||(this.handle=this.chooseHandle(o),this.mouseMove(t)),e.from.classList.remove("vanilla-slider__handle_last-type"),e.to.classList.remove("vanilla-slider__handle_last-type"),this.handle&&(this.handle.classList.add("active"),this.handle.classList.add("vanilla-slider__handle_last-type"),this.viewEvents.slideStart.notify(this.handle)),window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp)},t.prototype.mouseMove=function(t){var e=this.nodes,o=this.getRelativeCoord(t),n=this.handle===e.from?"fromChanged":"toChanged";this.viewEvents[n].notify(o)},t.prototype.mouseUp=function(t){this.handle&&(window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),this.handle.classList.remove("active"),this.viewEvents.slideEnd.notify(this.handle),this.handle=null)},t.prototype.chooseHandle=function(t){var e=this.options,o=this.nodes;if(this.handle)return this.handle;if("double"!==e.type)return o.from;if(e.fromFixed&&e.toFixed)return null;if(e.fromFixed)return o.to;if(e.toFixed)return o.from;var n=this.getHandleCoord(o.from),i=this.getHandleCoord(o.to);return"horizontal"===e.orientation&&t<n?o.from:"horizontal"===e.orientation&&t>i?o.to:"vertical"===e.orientation&&t>n?o.from:"vertical"===e.orientation&&t<i?o.to:Math.abs(n-t)<Math.abs(i-t)?o.from:o.to},t.prototype.getRelativeCoord=function(t){var e=this.nodes,o="horizontal"===this.options.orientation?"pageX":"pageY",n="horizontal"===this.options.orientation?"offsetLeft":"offsetTop";return t[o]-e.track[n]},t.prototype.getHandleCoord=function(t){var e="horizontal"===this.options.orientation?"offsetLeft":"offsetRight",o="horizontal"===this.options.orientation?"offsetWidth":"offsetHeight";return t[e]+t[o]/2},s([r.bind],t.prototype,"mouseDown",null),s([r.bind],t.prototype,"mouseMove",null),s([r.bind],t.prototype,"mouseUp",null),t}();e.default=c},function(t,e){},function(t,e){},function(t,e,o){var n,i,s;!function(o,r){i=[e],n=r,void 0!==(s="function"==typeof n?n.apply(e,i):n)&&(t.exports=s)}(0,function(t){"use strict";function e(t,e){e=e||t.decorate||o(t);var n=e();return function(){for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];var r=i.length;return(r<2?e:r>2?n:t).apply(void 0,i)}}function o(t){return function(e){return"function"==typeof e?t(e):function(o,n,i){i.value=t(i.value,e,o,n,i)}}}t.__esModule=!0;var n={},i=Object.prototype.hasOwnProperty,s={memoize:function(t){var e=arguments.length<=1||void 0===arguments[1]?n:arguments[1],o=e.cache||{};return function(){for(var n=arguments.length,s=Array(n),r=0;r<n;r++)s[r]=arguments[r];var a=String(s[0]);return!1===e.caseSensitive&&(a=a.toLowerCase()),i.call(o,a)?o[a]:o[a]=t.apply(this,s)}},debounce:function(t,e){if("function"==typeof e){var o=t;t=e,e=o}var n=e&&e.delay||e||0,i=void 0,s=void 0,r=void 0;return function(){for(var e=arguments.length,o=Array(e),a=0;a<e;a++)o[a]=arguments[a];i=o,s=this,r||(r=setTimeout(function(){t.apply(s,i),i=s=r=null},n))}},bind:function(t,e,o){var n=o.value;return{configurable:!0,get:function(){var t=n.bind(this);return Object.defineProperty(this,e,{value:t,configurable:!0,writable:!0}),t}}}},r=e(s.memoize),a=e(s.debounce),l=e(function(t,e){return t.bind(e)},function(){return s.bind});t.memoize=r,t.debounce=a,t.bind=l,t.default={memoize:r,debounce:a,bind:l}})},function(t,e,o){"use strict";var n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++){e=arguments[o];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),s=function(){function t(t,e,o){this.model=t,this.view=e,this.callbacks=n({},i.initialOptions),this.customEvents={},this.init(o)}return t.prototype.init=function(t){this.setCallbacks(t),this.customEvents.create=this.createSliderEvent("vanillacreate"),this.callClientCallback(this.customEvents.create,n({},this.model.data,this.view.data),this.callbacks.onCreate),this.view.rootObject.dispatchEvent(this.customEvents.create),this.attachModelEvents(),this.attachViewEvents(),this.view.calcFrom(this.convertToPercent(this.model.data.from)),this.view.calcTo(this.convertToPercent(this.model.data.to))},t.prototype.update=function(t){this.setCallbacks(t),this.customEvents.update=this.createSliderEvent("vanillaupdate"),this.callClientCallback(this.customEvents.update,n({},this.model.data,this.view.data),this.callbacks.onUpdate),this.view.rootObject.dispatchEvent(this.customEvents.update),this.view.calcFrom(this.convertToPercent(this.model.data.from)),this.view.calcTo(this.convertToPercent(this.model.data.to))},t.prototype.setCallbacks=function(t){this.callbacks.onCreate=t.onCreate,this.callbacks.onStart=t.onStart,this.callbacks.onSlide=t.onSlide,this.callbacks.onEnd=t.onEnd,this.callbacks.onUpdate=t.onUpdate},t.prototype.attachViewEvents=function(){var t=this,e=this.model,o=this.view;o.events.fromChanged.attach(function(o){e.calcFromWithStep(t.convertToReal(o))}),o.events.toChanged.attach(function(o){e.calcToWithStep(t.convertToReal(o))}),o.events.slideStart.attach(function(i){t.customEvents.start=t.createSliderEvent("vanillastart"),t.callClientCallback(t.customEvents.start,n({handle:i},e.data,o.data),t.callbacks.onStart),i.dispatchEvent(t.customEvents.start)}),o.events.slideEnd.attach(function(i){t.customEvents.end=t.createSliderEvent("vanillaend"),t.callClientCallback(t.customEvents.end,n({handle:i},e.data,o.data),t.callbacks.onEnd),i.dispatchEvent(t.customEvents.end)})},t.prototype.attachModelEvents=function(){var t=this,e=this.model,o=this.view;e.events.fromChanged.attach(function(i){o.calcFrom(t.convertToPercent(i)),t.customEvents.slide=t.createSliderEvent("vanillaslide"),t.callClientCallback(t.customEvents.slide,n({handle:o.nodesData.from},e.data,o.data),t.callbacks.onSlide),o.nodesData.from.dispatchEvent(t.customEvents.slide)}),e.events.toChanged.attach(function(i){o.calcTo(t.convertToPercent(i)),t.customEvents.slide=t.createSliderEvent("vanillaslide"),t.callClientCallback(t.customEvents.slide,n({handle:o.nodesData.to},e.data,o.data),t.callbacks.onSlide),o.nodesData.to.dispatchEvent(t.customEvents.slide)})},t.prototype.convertToPercent=function(t){var e=this.model.data,o=e.max-e.min;return Number((100*(t-e.min)/o).toFixed(10))},t.prototype.convertToReal=function(t){var e=this.model.data,o=this.view.nodesData,n=e.max-e.min;return"horizontal"===this.view.data.orientation?Number((t*n/o.track.clientWidth+e.min).toFixed(10)):Number(((o.track.clientHeight-t)*n/o.track.clientHeight+e.min).toFixed(10))},t.prototype.callClientCallback=function(t,e,o){void 0===e&&(e={}),o&&o(t,e)},t.prototype.createSliderEvent=function(t){return new CustomEvent(t,{detail:{from:this.model.data.from,to:this.model.data.to},bubbles:!0,cancelable:!0})},t}();e.default=s}]).default});